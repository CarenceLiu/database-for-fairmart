### 前后端功能对应

以前端用户每一次点击为一个功能

| 前端功能                             | 描述                                             | Sql                                                          | 后端API name | 后端API参数                        | 后端返回内容 | Done? |
| ------------------------------------ | ------------------------------------------------ | ------------------------------------------------------------ | ------------ | ---------------------------------- | ---------------------------------- | ------------------------------------ |
| 打开网页                             | 展示初始页面，显示商品等信息                     | select<br />1. category(name)<br />2. product(name) where state=onsale | /user_search_products | strategy_0, strategy_1, key, category_id                                 | 返回符合要求的product的list | done |
| 用户点击注册                         | 进入注册界面                                     | x                                                            | x            | x                                  | x | done |
| 用户在注册界面输入信息并点击确认注册 | 尝试注册，注册成功返回个人页面；失败提示错误信息 | insert(user_id,user_name,password,email)                     | /register | user_name, password,email          | state = true, result = success_str / state = false, result = fail_str | done |
| 用户输入信息并点击登录               | 尝试登录，登录成功返回个人页面；失败提示请注册   | select *(except password) from user where email=input and password=input | /login      | email, password                     |  state = true, result = success_str / state = false, result = fail_str | done |
| 用户点击商品                         | 进入商品页面，显示商品信息                       | select * from product where product_id = input               |/product_info              | product_id                         | 返回product | done |
| 用户在商品页面点击购买               | 购买商品                                         | transaction:<br />1. buyer_money -= price<br />2. seller_money += price<br />2. state = sold<br /> |/buy_product              | user_id, product_id                | state = true, result = success_str / state = false, result = fail_str | done |
| 用户在商品页面点击获得联系方式       | 提供卖家联系方式                                 | select email, other connect description from user where user_id = owner_id |/get_seller_info              | product_id                         | email, other connect description | done |
| 用户在商品页面点击收藏               | 收藏商品                                         | insert collect(user_id,product_id)                           | /add_favorite             | user_id,product_id                 | state = true, result = success_str 如果重复收藏则直接忽略 | done |
| 商品页面显示是否收藏                 | 判断是否收藏                                     | select * from collect where user_id = input and product_id = input | /get_favorite_state             | user_id,product_id                 | state = true / false | done |
| 用户在已收藏的商品页面点击取消收藏   | 取消某个商品的收藏                               | delete collect(user_id, product_id)                          | /delete_favorite             | user_id,product_id                 | state = true, result = success_str若未收藏直接忽略 | done |
| 点击购买记录，显示购买记录           | 跳转到购买记录页面                               | select product info from product where history.product_id = product.id and buyer = input | /my_purchase             | user_id, strategy_0, strategy_1, category_id                             | 返回符合要求的product的list, 若未登录会被忽略 | done |
| 点击售出记录，显示售出记录           | 跳转到售出记录页面                               | select product info from product where history.product_id = product.id and seller = input | /my_sold             |user_id, strategy_0, strategy_1, category_id                              | 返回符合要求的product的list | done |
| 用户充值                             | 点击充值按钮并充值                               | money += input                                               | /deposit             | user_id, money                     | state = true, result = success_str, money / state = false, result = fail_str, money | done |
| 商品检索                             | 输入商品名关键字并点击搜索                       | product_name like "\*input\*" from product                   | /user_search_products | strategy_0, strategy_1, key                                 | 返回符合要求的product的list| done |
| 管理员界面                           | 判断是否为管理员，显示删除按钮等                 | select state from user where user_id = input                 | /get_user_state             | user_id                            | state = true / false | done |
| 管理员删除商品                       | 删除商品                                         | delect product(product_id) if user is administrator          | /delete_product             | user_id, product_id                | state = true, result = success_str, money / state = false, result = fail_str, money | done |
| 用户点击个人页面                     | 进入个人页面                                     | select *(except password) from user where user_id = input    | /get_user_info             | user_id                            | state = true, 返回user全部信息除了password / state = false, 返回未登录 | done |
| 修改Other contact description        | 点击修改并输入新内容                             | update(user_id, input)                                       | /change_contact_info             | user_id, other_contact_description | state = true, result = success_str, money / state = false, result = fail_str, money | done |
| 用户发布商品 | 点击发布商品并输入相应内容                                     | insert product(product_id, user_id, category_id, product_name, price, product_description)                                                 | /user_post_product                                                              |user_id, category_id, product_name, price, product_description              | 返回刚记加入的product                                    |  |
| 用户查看收藏的商品 | 跳转到收藏商品目录                                     | select product info from product where favorites.product_id = product.product_id and favorites.user_id = input                                                 | /my_favorites                                                             | user_id             | 返回符合要求的product的list                                   | done |
| 用户查看全部发布的商品                                    | 跳转到发布页面                           | select * from product where user_id = input                                                          | /user_all_products             | user_id                                    | 返回所有的符合条件的product的list | done |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |
|                                      |                                                  |                                                              |              |                                    ||  |

